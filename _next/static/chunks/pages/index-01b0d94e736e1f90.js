(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4776)}])},2880:function(e,n,t){"use strict";t.d(n,{j:function(){return r}});var s=t(5893),o=t(5756),i=t.n(o),a=t(1163),c=t(461);function r(){let e=(0,a.useRouter)(),[,,n]=(0,c.Z)(["access_token"]);return(0,s.jsx)("div",{className:i().all,children:(0,s.jsx)("button",{onClick:function(){n("access_token"),e.push("/")},children:(0,s.jsx)("img",{className:i().logo,src:"icons/houselogo.png"})})})}},987:function(e,n,t){"use strict";t.d(n,{E:function(){return i}});var s=t(1354),o=t(1876).Buffer;class i{static async login(e,n){let t=(0,s.SHA256)(n),i="".concat(e,":").concat(t),a={method:"GET",Authorization:"Basic ".concat(o.from(i).toString("base64"))},c=await fetch("/backend/users/signin",{headers:a}),r=await c.json();return"success"===r.status?r.data:null}static async register(e,n){let t=(0,s.SHA256)(n),i="".concat(e,":").concat(t),a={method:"GET",Authorization:"Basic ".concat(o.from(i).toString("base64"))},c=await fetch("/backend/users/signup",{headers:a}),r=await c.json();return"success"===r.status?r.data:null}static StoreJWT(e){document.cookie="access_token=".concat(e,"; path=/;")}static async verifyAccessToken(e){let n=new Headers;n.append("Authorization","Bearer ".concat(e));let t=await fetch("/backend/verifyJWT",{headers:n}),s=await t.json();return s}static parseJwt(){let e=document.cookie;if(null!==e||void 0!==e){let n=e.split(";").find(e=>e.trim().startsWith("access_token=")).split("=")[1],t=n.split(".")[1],s=t.replace(/-/g,"+").replace(/_/g,"/"),o=JSON.parse(atob(s));return o}return null}static async checkLoginStatus(e){if(null!==e){let n=await i.verifyAccessToken(e);if(n.res)return n.res}return null}static async getUserNameById(e){if(null!==e||void 0!==e){let n=await fetch("/backend/users/".concat(e),{method:"GET"}),t=await n.json();if("success"===t.status)return t.data[0].name}return null}}},4776:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return B}});var s=t(5893),o=t(9008),i=t.n(o),a=t(5675),c=t.n(a),r=t(9854),l=t.n(r),u=t(2162),_=t.n(u),g=t(1664),d=t.n(g),p=t(987),m=t(7294),x=t(1163);function h(){let e=(0,x.useRouter)(),[n,t]=(0,m.useState)(""),[o,i]=(0,m.useState)(""),[a,c]=(0,m.useState)(""),r=e=>{if("Enter"===e.key){var n;null===(n=document.getElementById("myButton"))||void 0===n||n.click()}};async function l(){try{let t=await p.E.login(n,a);null!==t?(p.E.StoreJWT(t[0].token.access_token),e.push("/findgame"),i("")):i("Mot de passe ou login incorrect")}catch(e){i(e)}}return(0,s.jsxs)("div",{className:_().loginlines,children:[(0,s.jsx)("h1",{className:_().titleLogin,children:"Connexion"}),(0,s.jsxs)("div",{className:_().wrapperbox,children:[(0,s.jsx)("label",{className:_().icon1,children:(0,s.jsx)("i",{className:_().iconUser,children:(0,s.jsx)("img",{className:_().image,src:"icons/user.png"})})}),(0,s.jsx)("input",{className:_().inputT1,type:"text",name:"name",id:"name",placeholder:"Pseudo",required:!0,value:n,onChange:function(e){let n=e.target.value;t(n)},onKeyPress:r}),(0,s.jsx)("br",{}),(0,s.jsx)("label",{className:_().icon2,children:(0,s.jsx)("i",{className:_().iconCadenas,children:(0,s.jsx)("img",{className:_().image,src:"icons/cadenas-verrouille.png"})})}),(0,s.jsx)("input",{className:_().inputT2,type:"password",name:"pwd",id:"pwd",placeholder:"Mot de passe",required:!0,value:a,onChange:function(e){let n=e.target.value;c(n)},onKeyPress:r})]}),(0,s.jsx)("p",{className:_().pError,children:o}),(0,s.jsx)("button",{id:"myButton",className:_().loginButton,onClick:l,children:"JOUER"}),(0,s.jsx)("br",{}),(0,s.jsx)("p",{className:_().smalltext,children:"Pas de compte ?"}),(0,s.jsx)(d(),{href:"/register",className:_().registerButton,children:"Inscris-toi"})]})}var f=t(2880),j=t(3186),N=t.n(j);function w(){async function e(){window.open("https://www.cpe.fr/")}return(0,s.jsx)("div",{className:N().all,children:(0,s.jsx)("button",{onClick:e,children:(0,s.jsx)("img",{className:N().logo,src:"icons/cpelogo.jpg"})})})}var b=t(8635),k=t.n(b);function y(){async function e(){window.open("https://github.com/cpe-lyon/inge-web-projet-booty-byte-er")}return(0,s.jsx)("div",{className:k().all,children:(0,s.jsx)("button",{onClick:e,children:(0,s.jsx)("img",{className:k().logo,src:"icons/gitlogo.jpg"})})})}var v=t(461);function B(){let e=(0,x.useRouter)(),[n]=(0,v.Z)(["access_token"]);return(0,m.useEffect)(()=>{(async function(){1===await p.E.checkLoginStatus(n.access_token)&&e.push("/findgame")})()},[]),(0,s.jsxs)("div",{className:l().all,children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"BATTLESHIP - BootyByters"}),(0,s.jsx)("link",{rel:"icon",href:"/steeringwheel2.ico"})]}),(0,s.jsxs)("main",{className:l().main,children:[(0,s.jsx)(f.j,{}),(0,s.jsx)(w,{}),(0,s.jsx)(y,{}),(0,s.jsxs)("div",{className:l().loginbox,children:[(0,s.jsx)("p",{className:l().p1,children:"BATAILLE \xa0NAVALE"}),(0,s.jsx)("p",{className:l().p2,children:"BY THE"}),(0,s.jsx)("p",{className:l().p3,children:"B O O T Y \xa0\xa0 B Y T E R S"}),(0,s.jsx)("br",{}),(0,s.jsx)(c(),{className:l().logo,src:"/ships/croiseur-min.png",alt:"Croiseur",width:246,height:74,priority:!0}),(0,s.jsx)(h,{})]})]})]})}},3186:function(e){e.exports={all:"CpeButton_all__SvpBY",logo:"CpeButton_logo__AXpe5"}},8635:function(e){e.exports={all:"GitButton_all__Lr6Ka",logo:"GitButton_logo__UitXb"}},9854:function(e){e.exports={all:"Home_all__zxP_D",main:"Home_main__EtNt2",loginbox:"Home_loginbox__c4yQc",p1:"Home_p1__6IjW5",p2:"Home_p2__B_asV",p3:"Home_p3__tkMcO",description:"Home_description__Qwq1f",code:"Home_code__aGV0U",grid:"Home_grid__c_g6N",card:"Home_card__7oz7W",logo:"Home_logo__80mSr",content:"Home_content___fOQz",center:"Home_center__V0nxp",vercelLogo:"Home_vercelLogo__lhIxO",rotate:"Home_rotate__99GkW"}},2162:function(e){e.exports={all:"Login_all__aE8cn",loginbox:"Login_loginbox__HzkbY",titleLogin:"Login_titleLogin__fMjwP",testbox:"Login_testbox__KXiRV",wrapperbox:"Login_wrapperbox__kHWLp",icon1:"Login_icon1__57kjK",icon2:"Login_icon2__NvN2L",inputT1:"Login_inputT1__8CWx6",inputT2:"Login_inputT2___3X9P",image:"Login_image__D7NgJ",loginButton:"Login_loginButton__yZ0rX",smalltext:"Login_smalltext__15Jy9",registerButton:"Login_registerButton__t7J9G",pError:"Login_pError__E3Wl7"}},5756:function(e){e.exports={all:"MenuButton_all__paLiN",logo:"MenuButton_logo__3q_Xe"}},2480:function(){}},function(e){e.O(0,[570,61,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);