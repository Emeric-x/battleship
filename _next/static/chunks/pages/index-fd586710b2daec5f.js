(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4776)}])},2880:function(n,e,t){"use strict";t.d(e,{j:function(){return r}});var s=t(5893),o=t(5756),c=t.n(o),i=t(1163),a=t(461);function r(){const n=(0,i.useRouter)(),[,,e]=(0,a.Z)(["access_token"]);return(0,s.jsx)("div",{className:c().all,children:(0,s.jsx)("button",{onClick:function(){e("access_token"),n.push("/")},children:(0,s.jsx)("img",{className:c().logo,src:"icons/houselogo.png"})})})}},987:function(n,e,t){"use strict";t.d(e,{E:function(){return c}});var s=t(1354),o=t(1876).Buffer;class c{static async login(n,e){const t=(0,s.SHA256)(e),c="".concat(n,":").concat(t),i={method:"GET",Authorization:"Basic ".concat(o.from(c).toString("base64"))},a=await fetch("/backend/users/signin",{headers:i}),r=await a.json();return"success"===r.status?r.data:null}static async register(n,e){const t=(0,s.SHA256)(e),c="".concat(n,":").concat(t),i={method:"GET",Authorization:"Basic ".concat(o.from(c).toString("base64"))},a=await fetch("/backend/users/signup",{headers:i}),r=await a.json();return"success"===r.status?r.data:null}static StoreJWT(n){document.cookie="access_token=".concat(n,"; path=/;")}static async verifyAccessToken(n){const e=new Headers;e.append("Authorization","Bearer ".concat(n));const t=await fetch("/backend/verifyJWT",{headers:e});return await t.json()}static parseJwt(){const n=document.cookie;if(null!==n||void 0!==n){const e=n.split(";").find((n=>n.trim().startsWith("access_token="))).split("=")[1].split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(atob(e))}return null}static async checkLoginStatus(n){if(null!==n){const e=await c.verifyAccessToken(n);if(e.res)return e.res}return null}static async getUserNameById(n){if(null!==n||void 0!==n){const e=await fetch("/backend/users/".concat(n),{method:"GET"}),t=await e.json();return"success"===t.status?t.data[0].name:null}return null}}},4776:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return B}});var s=t(5893),o=t(9008),c=t.n(o),i=t(5675),a=t.n(i),r=t(9854),l=t.n(r),u=t(2162),_=t.n(u),d=t(1664),g=t.n(d),p=t(987),m=t(7294),h=t(1163);function x(){const n=(0,h.useRouter)(),[e,t]=(0,m.useState)(""),[o,c]=(0,m.useState)("");const[i,a]=(0,m.useState)("");const r=n=>{var e;"Enter"===n.key&&(null===(e=document.getElementById("myButton"))||void 0===e||e.click())};return(0,s.jsxs)("div",{className:_().loginlines,children:[(0,s.jsx)("h1",{className:_().titleLogin,children:"Connexion"}),(0,s.jsxs)("div",{className:_().wrapperbox,children:[(0,s.jsx)("label",{className:_().icon1,children:(0,s.jsx)("i",{className:_().iconUser,children:(0,s.jsx)("img",{className:_().image,src:"icons/user.png"})})}),(0,s.jsx)("input",{className:_().inputT1,type:"text",name:"name",id:"name",placeholder:"Pseudo",required:!0,value:e,onChange:function(n){const e=n.target.value;t(e)},onKeyPress:r}),(0,s.jsx)("br",{}),(0,s.jsx)("label",{className:_().icon2,children:(0,s.jsx)("i",{className:_().iconCadenas,children:(0,s.jsx)("img",{className:_().image,src:"icons/cadenas-verrouille.png"})})}),(0,s.jsx)("input",{className:_().inputT2,type:"password",name:"pwd",id:"pwd",placeholder:"Mot de passe",required:!0,value:i,onChange:function(n){const e=n.target.value;a(e)},onKeyPress:r})]}),(0,s.jsx)("p",{className:_().pError,children:o}),(0,s.jsx)("button",{id:"myButton",className:_().loginButton,onClick:async function(){try{let t=await p.E.login(e,i);null!==t?(p.E.StoreJWT(t[0].token.access_token),n.push("/findgame"),c("")):c("Mot de passe ou login incorrect")}catch(t){c(t)}},children:"JOUER"}),(0,s.jsx)("br",{}),(0,s.jsx)("p",{className:_().smalltext,children:"Pas de compte ?"}),(0,s.jsx)(g(),{href:"/register",className:_().registerButton,children:"Inscris-toi"})]})}var f=t(2880),j=t(3186),N=t.n(j);function w(){return(0,s.jsx)("div",{className:N().all,children:(0,s.jsx)("button",{onClick:async function(){window.open("https://www.cpe.fr/")},children:(0,s.jsx)("img",{className:N().logo,src:"icons/cpelogo.jpg"})})})}var b=t(8635),k=t.n(b);function v(){return(0,s.jsx)("div",{className:k().all,children:(0,s.jsx)("button",{onClick:async function(){window.open("https://github.com/cpe-lyon/inge-web-projet-booty-byte-er")},children:(0,s.jsx)("img",{className:k().logo,src:"icons/gitlogo.jpg"})})})}var y=t(461);function B(){const n=(0,h.useRouter)(),[e]=(0,y.Z)(["access_token"]);return(0,m.useEffect)((()=>{!async function(){1===await p.E.checkLoginStatus(e.access_token)&&n.push("/findgame")}()}),[]),(0,s.jsxs)("div",{className:l().all,children:[(0,s.jsxs)(c(),{children:[(0,s.jsx)("title",{children:"BATTLESHIP - BootyByters"}),(0,s.jsx)("link",{rel:"icon",href:"/steeringwheel2.ico"})]}),(0,s.jsxs)("main",{className:l().main,children:[(0,s.jsx)(f.j,{}),(0,s.jsx)(w,{}),(0,s.jsx)(v,{}),(0,s.jsxs)("div",{className:l().loginbox,children:[(0,s.jsx)("p",{className:l().p1,children:"BATAILLE \xa0NAVALE"}),(0,s.jsx)("p",{className:l().p2,children:"BY THE"}),(0,s.jsx)("p",{className:l().p3,children:"B O O T Y \xa0\xa0 B Y T E R S"}),(0,s.jsx)("br",{}),(0,s.jsx)(a(),{className:l().logo,src:"/ships/croiseur-min.png",alt:"Croiseur",width:246,height:74,priority:!0}),(0,s.jsx)(x,{})]})]})]})}},3186:function(n){n.exports={all:"CpeButton_all__SvpBY",logo:"CpeButton_logo__AXpe5"}},8635:function(n){n.exports={all:"GitButton_all__Lr6Ka",logo:"GitButton_logo__UitXb"}},9854:function(n){n.exports={all:"Home_all__zxP_D",main:"Home_main__EtNt2",loginbox:"Home_loginbox__c4yQc",p1:"Home_p1__6IjW5",p2:"Home_p2__B_asV",p3:"Home_p3__tkMcO",description:"Home_description__Qwq1f",code:"Home_code__aGV0U",grid:"Home_grid__c_g6N",card:"Home_card__7oz7W",logo:"Home_logo__80mSr",content:"Home_content___fOQz",center:"Home_center__V0nxp",vercelLogo:"Home_vercelLogo__lhIxO",rotate:"Home_rotate__99GkW"}},2162:function(n){n.exports={all:"Login_all__aE8cn",loginbox:"Login_loginbox__HzkbY",titleLogin:"Login_titleLogin__fMjwP",testbox:"Login_testbox__KXiRV",wrapperbox:"Login_wrapperbox__kHWLp",icon1:"Login_icon1__57kjK",icon2:"Login_icon2__NvN2L",inputT1:"Login_inputT1__8CWx6",inputT2:"Login_inputT2___3X9P",image:"Login_image__D7NgJ",loginButton:"Login_loginButton__yZ0rX",smalltext:"Login_smalltext__15Jy9",registerButton:"Login_registerButton__t7J9G",pError:"Login_pError__E3Wl7"}},5756:function(n){n.exports={all:"MenuButton_all__paLiN",logo:"MenuButton_logo__3q_Xe"}},2480:function(){}},function(n){n.O(0,[570,61,774,888,179],(function(){return e=8312,n(n.s=e);var e}));var e=n.O();_N_E=e}]);